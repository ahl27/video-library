<!-- session: {{ include.session }}<br><br> video: {{include.video}} -->

{% assign session-type = include.session.type | default: include.vsession.type | default: include.video.type | default: "Unknown" %}
{% assign description = include.session.description | default: include.vsession.description | default: include.video.description %}
{% assign materials = include.session.materials | default: include.vsession.materials | default: include.video.materials %}

<!-- determine the next archived version of tutorial -->
{% assign archivemonth = include.video.date | date: "%m" | plus: 1 | modulo: 12 | prepend: '00' | slice: -2, 2 %}
{% assign archiveyear = include.video.date | date: "%Y" %}
{% if archivemonth == '01' %}{% assign archiveyear = archiveyear | plus: 1 %}{% endif %}

<div class="flex-row" style="margin-top:1em;">
 <div class="col-md-8">
  <h3 class="session-section">{{session-type}}</h3>
  <div style="position:relative;padding-top:56.25%;">
   <iframe style="position:absolute;top:0;left:0;width:100%;height:100%;"
    {% if include.video.link contains 'http' %}
    data-src="{{video.link}}"
    {% else %}
    data-src="https://www.youtube.com/embed/{{include.video.link}}"
    {% endif %}
     class="lazyload"
     loading="lazy"
     frameborder="0"
     allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
     allowfullscreen>
   </iframe>
  </div>
  <div style="margin-top:1em;" class="video-metadata">
      <table>
          {% if description %}
          <tr>
              <td><strong>Description:</strong></td>
              <td>{{ description }}</td>
          </tr>
          {% endif %}
          <tr>
              <td><strong>Length:</strong></td>
              <td>{{ include.video.length | downcase }}</td>
          </tr>
   {% assign captions = include.video.captions | size %}
   {% if captions == 0 %}
          <tr>
              <td><strong>Captions:</strong></td>
              <td><strong>Warning! Uncaptioned English audio.</strong> The speaker refused to correct automatic captions for their video. Please contact the speaker.</td>
          </tr>
   {% else %}
          <tr>
              <td><strong>Captions:</strong></td>
              <td>{% for name in include.video.captions %}{% unless forloop.first %}, {% endunless %} {{ site.data.instructors[name].name}}{% endfor %}</td>
          </tr>
   {% endif %}
          {% if include.video.date %}
          <tr>
              <td><strong>Created:</strong></td>
              <td>{{include.video.date | date: "%-d %B %Y" }}</td>
          </tr>
          {% endif %}
          {% if materials %}
          <tr>
              <td><strong>Materials:</strong></td>
              <td>{% for m in materials %} <a href="{% unless m.link contains 'http' %}{{site.gtn}}/archive/{{archiveyear}}-{{archivemonth}}-01/{% endunless %}{{m.link}}">{{m.type}}</a>{% unless forloop.last %}, {% endunless %}{% endfor %}</td>
          </tr>
          {% endif %}
      </table>

  </div>
 </div>
 <!-- speaker(s) -->
 {% assign s = include.video.speakers %}
 {% assign numspeakers = include.video.speakers.size %}

 <div class="col-md-3">
  <center><h3 class="session-section">Speaker{%if numspeakers>1%}s{%endif%}</h3></center>
  {% include speakers.html speakers=s border="yes"%}
 </div>

</div><!-- end video session -->


