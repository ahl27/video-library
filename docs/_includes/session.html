{% assign session = include.session %}
{% assign id = include.id %}
{% assign type = include.type %}
{% assign module_id = include.module | default: "m1" %}

{% assign id2 = id | split: '/'%}
{% capture id %}{{id2[0]}}/{{id2[1]}}{% endcapture%}
{% assign subtutorial = id2[2] %}

{% assign description = include.session.description  %}


<div class="accordion-item">
  {% capture accordion_id %}heading{{module_id}}{{forloop.index0}}{% endcapture %}
  <h2 class="accordion-header" id="{{ accordion_id }}">
   <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{module_id}}{{forloop.index0}}" aria-expanded="true" aria-controls="collapse{{module_id}}{{forloop.index0}}">
        {{ site.data.gtn[id] | default: include.session.name | default: id }}
   </button>
  </h2>

  <div id="collapse{{module_id}}{{forloop.index0}}" class="accordion-collapse collapse {% if session.show  %}show{% endif %}" aria-labelledby="{{ accordion_id }}" data-bs-parent="#accordion{{module_id}}">

    <div class="accordion-body">
      {{description}}
      {{id}}|{{site.sessions[id]}}|
      {{include.session}}
      <br>

      {% if type == 'session' %}
        {% for vid in include.session.videos %}
          {% assign v = site.data.videos[vid].versions %}
          {% assign vs = site.data.videos[vid] %}
          {% include video-session.html video=v vsession=vs session=include.session %}
        {% endfor %}

      {% elsif type == 'video' %}
        {% if include.session.versions.size >= 1  %}
           {% assign v = include.session.versions %}
           {% include video-session.html video=v session=include.session %}
        {% else %} <!-- Self-study tutorial -->
            selfstudy tutorial
            {% include self-study.html %}
        {% endif %}

      {% else %}
        unknown session type, please check
      {% endif %}


      <!-- Instructors -->
      {% if include.instructors %}
        {% assign instructors = include.instructors %}
        {% assign numspeakers = include.instructors.size %}
        <h3 class="session-section">Instructor{%if numspeakers>1%}s{%endif%}</h3>
        The following people are available for questions and support during for this tutorial.


        <div class="flex-row" style="margin-top:1em;">
          <div>{% include speakers.html speakers=instructors border="yes" %}</div>
        </div>
      {% endif%}

      <!-- Supporting Servers -->

      <!-- Resources -->



    </div><!-- end accordion body -->
  </div><!-- end collapse -->
</div><!-- end accordion item (training session) -->


